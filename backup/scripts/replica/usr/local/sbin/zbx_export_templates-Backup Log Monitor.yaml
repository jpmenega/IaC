zabbix_export:
  version: '5.2'
  date: '2021-09-26T23:01:22Z'
  groups:
    -
      name: Backup
  templates:
    -
      template: 'Backup Log Monitor'
      name: 'Backup Log Monitor'
      groups:
        -
          name: Backup
      applications:
        -
          name: 'Backup log'
      items:
        -
          name: 'Backup checksum'
          key: 'vfs.file.cksum[{$LOG_FILE}]'
          delay: '60s;0/1-7,00:00-06:00;0/1-7,06:01-24:00'
          applications:
            -
              name: 'Backup log'
        -
          name: 'Backup status'
          key: 'vfs.file.regmatch[{$LOG_FILE},Status = OK]'
          delay: '60s;0/1-7,00:00-06:00;0/1-7,06:01-24:00'
          applications:
            -
              name: 'Backup log'
      macros:
        -
          macro: '{$LOG_FILE}'
          value: /var/log/replica.log
  triggers:
    -
      expression: |
        {Backup Log Monitor:vfs.file.cksum[{$LOG_FILE}].change()}=0
        or
        {Backup Log Monitor:vfs.file.regmatch[{$LOG_FILE},Status = OK].last()}=0
      name: 'Backup log {$LOG_FILE} error'
      priority: HIGH
